module.exports = class Data1761562179099 {
    name = 'Data1761562179099'

    async up(db) {
        await db.query(`CREATE TABLE "game_started_event" ("id" character varying NOT NULL, "block_number" integer NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "extrinsic_hash" text, "contract_address" text NOT NULL, "game_number" numeric NOT NULL, "player" text NOT NULL, "min_number" integer NOT NULL, "max_number" integer NOT NULL, "contract_id" character varying, CONSTRAINT "PK_2f4fb4f2461744b862f1094ff3b" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_925936d79e2e134ddd0b9e4542" ON "game_started_event" ("contract_id") `)
        await db.query(`CREATE INDEX "IDX_23c17c25d5d6ba42f783f595d1" ON "game_started_event" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_abc65052faba7457b0d84088d7" ON "game_started_event" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_a6464c6a077bf3cf830f2818cd" ON "game_started_event" ("extrinsic_hash") `)
        await db.query(`CREATE INDEX "IDX_742662d75f739484bdc95470d5" ON "game_started_event" ("game_number") `)
        await db.query(`CREATE TABLE "guess_submitted_event" ("id" character varying NOT NULL, "block_number" integer NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "extrinsic_hash" text, "contract_address" text NOT NULL, "game_number" numeric NOT NULL, "attempt_number" integer NOT NULL, "guess" integer NOT NULL, "contract_id" character varying, CONSTRAINT "PK_5ef1badf30c8a0a57cf6e15ab68" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_d57f6afba4e45b6ab03d7a30a8" ON "guess_submitted_event" ("contract_id") `)
        await db.query(`CREATE INDEX "IDX_9bab8f03640903033ebafcc5d8" ON "guess_submitted_event" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_0bbd2f07664be446bd4000c378" ON "guess_submitted_event" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_a38fe0a118c8c3b082e58b52f2" ON "guess_submitted_event" ("extrinsic_hash") `)
        await db.query(`CREATE INDEX "IDX_c28ee5af8b9a2916d1f5dd2883" ON "guess_submitted_event" ("game_number") `)
        await db.query(`CREATE TABLE "clue_given_event" ("id" character varying NOT NULL, "block_number" integer NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "extrinsic_hash" text, "contract_address" text NOT NULL, "game_number" numeric NOT NULL, "attempt_number" integer NOT NULL, "guess" integer NOT NULL, "result" text NOT NULL, "contract_id" character varying, CONSTRAINT "PK_665d8bc43ad70688bdc07d70158" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_6387988305ff5a736912d5dfc0" ON "clue_given_event" ("contract_id") `)
        await db.query(`CREATE INDEX "IDX_ee681a052c6e14b9bb6a9c733b" ON "clue_given_event" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_c7e03b39d438ad490f81392a0f" ON "clue_given_event" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_9421b53e742c92cc4c7895125b" ON "clue_given_event" ("extrinsic_hash") `)
        await db.query(`CREATE INDEX "IDX_04a9fa5cb09439a994fd7ef3c1" ON "clue_given_event" ("game_number") `)
        await db.query(`CREATE TABLE "contract" ("id" character varying NOT NULL, "code_hash" text, "instantiated_at" TIMESTAMP WITH TIME ZONE NOT NULL, "instantiated_at_block" integer NOT NULL, "instantiated_by" text NOT NULL, CONSTRAINT "PK_17c3a89f58a2997276084e706e8" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "game" ("id" character varying NOT NULL, "game_number" numeric NOT NULL, "player" text NOT NULL, "min_number" integer NOT NULL, "max_number" integer NOT NULL, "attempt" integer NOT NULL, "last_guess" integer, "last_clue" text, "created_at" TIMESTAMP WITH TIME ZONE NOT NULL, "created_at_block" integer NOT NULL, "guess_history" jsonb NOT NULL, "contract_id" character varying, CONSTRAINT "PK_352a30652cd352f552fef73dec5" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_6242c4de2ac5e84242a9778ca5" ON "game" ("game_number") `)
        await db.query(`CREATE INDEX "IDX_c12e279c5a1841ead22925a40b" ON "game" ("created_at") `)
        await db.query(`CREATE INDEX "IDX_ab93a9c5d31869e24f076d4f60" ON "game" ("created_at_block") `)
        await db.query(`CREATE INDEX "IDX_01ee6a173bf360b4ed2bbb1b81" ON "game" ("contract_id") `)
        await db.query(`ALTER TABLE "game_started_event" ADD CONSTRAINT "FK_925936d79e2e134ddd0b9e45428" FOREIGN KEY ("contract_id") REFERENCES "contract"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "guess_submitted_event" ADD CONSTRAINT "FK_d57f6afba4e45b6ab03d7a30a85" FOREIGN KEY ("contract_id") REFERENCES "contract"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "clue_given_event" ADD CONSTRAINT "FK_6387988305ff5a736912d5dfc08" FOREIGN KEY ("contract_id") REFERENCES "contract"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "game" ADD CONSTRAINT "FK_01ee6a173bf360b4ed2bbb1b813" FOREIGN KEY ("contract_id") REFERENCES "contract"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "game_started_event"`)
        await db.query(`DROP INDEX "public"."IDX_925936d79e2e134ddd0b9e4542"`)
        await db.query(`DROP INDEX "public"."IDX_23c17c25d5d6ba42f783f595d1"`)
        await db.query(`DROP INDEX "public"."IDX_abc65052faba7457b0d84088d7"`)
        await db.query(`DROP INDEX "public"."IDX_a6464c6a077bf3cf830f2818cd"`)
        await db.query(`DROP INDEX "public"."IDX_742662d75f739484bdc95470d5"`)
        await db.query(`DROP TABLE "guess_submitted_event"`)
        await db.query(`DROP INDEX "public"."IDX_d57f6afba4e45b6ab03d7a30a8"`)
        await db.query(`DROP INDEX "public"."IDX_9bab8f03640903033ebafcc5d8"`)
        await db.query(`DROP INDEX "public"."IDX_0bbd2f07664be446bd4000c378"`)
        await db.query(`DROP INDEX "public"."IDX_a38fe0a118c8c3b082e58b52f2"`)
        await db.query(`DROP INDEX "public"."IDX_c28ee5af8b9a2916d1f5dd2883"`)
        await db.query(`DROP TABLE "clue_given_event"`)
        await db.query(`DROP INDEX "public"."IDX_6387988305ff5a736912d5dfc0"`)
        await db.query(`DROP INDEX "public"."IDX_ee681a052c6e14b9bb6a9c733b"`)
        await db.query(`DROP INDEX "public"."IDX_c7e03b39d438ad490f81392a0f"`)
        await db.query(`DROP INDEX "public"."IDX_9421b53e742c92cc4c7895125b"`)
        await db.query(`DROP INDEX "public"."IDX_04a9fa5cb09439a994fd7ef3c1"`)
        await db.query(`DROP TABLE "contract"`)
        await db.query(`DROP TABLE "game"`)
        await db.query(`DROP INDEX "public"."IDX_6242c4de2ac5e84242a9778ca5"`)
        await db.query(`DROP INDEX "public"."IDX_c12e279c5a1841ead22925a40b"`)
        await db.query(`DROP INDEX "public"."IDX_ab93a9c5d31869e24f076d4f60"`)
        await db.query(`DROP INDEX "public"."IDX_01ee6a173bf360b4ed2bbb1b81"`)
        await db.query(`ALTER TABLE "game_started_event" DROP CONSTRAINT "FK_925936d79e2e134ddd0b9e45428"`)
        await db.query(`ALTER TABLE "guess_submitted_event" DROP CONSTRAINT "FK_d57f6afba4e45b6ab03d7a30a85"`)
        await db.query(`ALTER TABLE "clue_given_event" DROP CONSTRAINT "FK_6387988305ff5a736912d5dfc08"`)
        await db.query(`ALTER TABLE "game" DROP CONSTRAINT "FK_01ee6a173bf360b4ed2bbb1b813"`)
    }
}
